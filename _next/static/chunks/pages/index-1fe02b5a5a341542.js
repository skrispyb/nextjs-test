(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9516)}])},9516:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(4051),o=n.n(r),s=n(5893),a=n(7294),i=n(9008),c=n(5675),l=n(214),u=n.n(l),d=n(4465),p=n(9669),m=n.n(p),x=n(1163);function h(e,t,n,r,o,s,a){try{var i=e[s](a),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(r,o)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){var e=(0,x.useRouter)().query.status,t=(0,a.useState)(!1),n=t[0],r=t[1],l=(0,a.useState)({name:"Apple AirPods",description:"Latest Apple AirPods.",quantity:0,price:999}),p=l[0],f=l[1],_=function(e){f(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}({},p,{quantity:Math.max(0,e)}))},g="".concat("pk_test_51KW7kGDp3tolhcXIOINNkHqcoxzVtebELxtFZjjDfWbhsIPe1ee8ZlAMSxCgrOEVIbxUuUKNQi8VHOCFLTXy4bUL00mNbeVYkt"),j=(0,d.J)(g),y=function(){var e,t=(e=o().mark((function e(){var t,n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,j;case 3:return t=e.sent,e.next=6,m().post("/api/create-stripe-session",{item:p});case 6:return n=e.sent,e.next=9,t.redirectToCheckout({sessionId:n.data.id});case 9:(s=e.sent).error&&alert(s.error.message),r(!1);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){h(s,r,o,a,i,"next",e)}function i(e){h(s,r,o,a,i,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:u().container,children:[(0,s.jsxs)(i.default,{children:[(0,s.jsx)("title",{children:"Create Next App"}),(0,s.jsx)("meta",{name:"description",content:"Complete Step By Step Tutorial for integrating Stripe Checkout with Next.js"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("main",{className:u().main,children:[(0,s.jsx)("h1",{className:u().title,style:{margin:"12px 0"},children:"Welcome to my Next.js test project!"}),e&&"success"===e&&(0,s.jsx)("div",{className:"bg-green-100 text-green-700 p-2 rounded border mb-2 border-green-700",style:{backgroundColor:"rgb(0,200,0)",padding:"1rem",margin:"24px 0",fontSize:"24px",fontWeight:"600"},children:"Payment Successful"}),e&&"cancel"===e&&(0,s.jsx)("div",{className:"bg-red-100 text-red-700 p-2 rounded border mb-2 border-red-700",style:{backgroundColor:"rgb(200,0,0)",padding:"1rem",margin:"24px 0",fontSize:"24px",fontWeight:"600"},children:"Payment Unsuccessful"}),(0,s.jsxs)("div",{className:"shadow-lg border rounded p-2 ",children:[(0,s.jsxs)("h2",{className:"text-2xl",children:["$ ",p.price]}),(0,s.jsx)("h3",{className:"text-xl",children:p.name}),(0,s.jsx)("p",{className:"text-gray-500",children:p.description}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Quantity:"}),(0,s.jsxs)("div",{className:"border rounded",children:[(0,s.jsx)("button",{onClick:function(){_(p.quantity-1)},className:"bg-blue-500 py-2 px-4 text-white rounded hover:bg-blue-600",children:"-"}),(0,s.jsx)("input",{type:"number",className:"p-2",onChange:function(e){_(parseInt(e.target.value))},defaultValue:p.quantity}),(0,s.jsx)("button",{onClick:function(){_(p.quantity+1)},className:"bg-blue-500 py-2 px-4 text-white rounded hover:bg-blue-600",children:"+"})]}),(0,s.jsxs)("p",{children:["Total: $",p.quantity*p.price]}),(0,s.jsx)("button",{disabled:0===p.quantity||n,onClick:y,className:"bg-blue-500 hover:bg-blue-600 text-white block w-full py-2 rounded mt-2 disabled:cursor-not-allowed disabled:bg-blue-100",children:n?"Processing...":"Buy"})]})]}),(0,s.jsx)("footer",{className:u().footer,children:(0,s.jsxs)("a",{href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:["Powered by"," ",(0,s.jsx)("span",{className:u().logo,children:(0,s.jsx)(c.default,{src:"".concat("/nextjs-test","/vercel.svg"),alt:"Vercel Logo",width:72,height:16})})]})})]})}},214:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}}},function(e){e.O(0,[544,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);